{"version":3,"file":"index.js","sources":["../components/TopicFunction.js","../template/index.js"],"sourcesContent":["/*\r\n * This component returns a block of functions that user can use to send messages to specific topic.\r\n * As input it requires a list of Channel models from the parsed AsyncAPI document\r\n */\r\nexport function TopicFunction({ operations }) {\r\n  const topicsDetails = getTopics(operations);\r\n  let functions = '';\r\n\r\n  topicsDetails.forEach((t) => {\r\n    functions += `def send${t.name}(self, id):\r\n        topic = \"${t.topic}\"\r\n        self.client.publish(topic, id)\\n`\r\n  });\r\n\r\n  return functions;\r\n}\r\n\r\n/*\r\n * This function returns a list of objects, one for each channel with two properties, name and topic\r\n * name - holds information about the operationId provided in the AsyncAPI document\r\n * topic - holds information about the address of the topic\r\n *\r\n * As input it requires a list of Channel models from the parsed AsyncAPI document\r\n */\r\nfunction getTopics(operations) {\r\n  let topicsDetails = [];\r\n\r\n  operations.forEach((op) => {\r\n    const channels = op.channels().all();\r\n    if (!channels.length) return;\r\n\r\n    const channel = channels[0];\r\n    const operationId = op.operationId() || op.id();\r\n\r\n    topicsDetails.push({\r\n      name: operationId.charAt(0).toUpperCase() + operationId.slice(1),\r\n      topic: channel.address()\r\n    });\r\n  });\r\n\r\n  return topicsDetails;\r\n}","\nimport { File, Text } from '@asyncapi/generator-react-sdk'\nimport { TopicFunction } from '../components/TopicFunction'\nexport default function ({ asyncapi, params }) {  \n  return (\n    <File name=\"client.py\">    \n      <Text newLines={2}>import paho.mqtt.client as mqtt</Text>   \n      <Text newLines={2}>mqttBroker = \"{asyncapi.servers().get(params.server).host()}\"</Text>   \n      <Text newLines={2}>class {asyncapi.info().title().replaceAll(' ', '')}Client:</Text>  \n      <Text indent={2} newLines={2}>\n        {`def __init__(self):\n            self.client = mqtt.Client()\n            self.client.connect(mqttBroker)`}\n      </Text>\n      <Text indent={2} newLines={2}>\n        <TopicFunction operations={asyncapi.operations().filterByReceive()} />\n      </Text>\n      </File>\n  )\n}"],"names":["TopicFunction","operations","topicsDetails","getTopics","functions","forEach","t","name","topic","op","channels","all","length","channel","operationId","id","push","charAt","toUpperCase","slice","address","asyncapi","params","_jsxs","File","children","_jsx","Text","newLines","servers","get","server","host","info","title","replaceAll","indent","filterByReceive"],"mappings":"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"}